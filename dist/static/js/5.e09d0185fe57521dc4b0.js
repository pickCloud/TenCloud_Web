webpackJsonp([5],{141:function(t,a,e){var i=e(7)(e(191),e(170),null,null);t.exports=i.exports},146:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(53),s=function(t){return t&&t.__esModule?t:{default:t}}(i),o={theme:"comb-msg",hasClose:!1,buttons:[{label:"确定",theme:""},{label:"取消",theme:""}]};a.default={methods:{popperDelete:function(t,a){var e=this.$createElement;this.$confirm((0,s.default)({},o,{content:e("div",[e("img",{attrs:{src:"./static/img/error_icon.png",class:"vam m-r16"}}),e("span",{attrs:{class:"vam"}},t)])}),function(t){0===(arguments.length<=1?void 0:arguments[1])&&a&&a.call(),t.actionPopper(!1)})},popperInfo:function(t,a,e){this.$confirm((0,s.default)({},o,{content:t}),function(t){0===(arguments.length<=1?void 0:arguments[1])?a&&a.call():e&&e.call(),t.actionPopper(!1)})},popperWaiting:function(t){var a=this.$createElement;return this.$confirm({theme:"comb-msg",hasClose:!1,maskClose:!1,content:a("span",null,[a("img",{attrs:{src:"./static/img/spin.gif",class:"vam m-r8"}}),a("span",{attrs:{class:"vam"}},t)]),buttons:[]})}}}},170:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-pad page-project-add"},[e("panel",{attrs:{title:t.isEditor?"项目修改":"添加项目"}},[e("table",{staticClass:"add-table"},[e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"80%"}}),t._v(" "),e("tbody",[e("tr",[e("td",{staticClass:"text-center"},[t._v("名称")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.name,expression:"formdata.name"}],attrs:{type:"text",placeholder:"请输入小写字母"},domProps:{value:t.formdata.name},on:{input:function(a){a.target.composing||(t.formdata.name=a.target.value)}}})])]),t._v(" "),e("tr",[e("td",{staticClass:"text-center"},[t._v("项目描述")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.description,expression:"formdata.description"}],attrs:{type:"text"},domProps:{value:t.formdata.description},on:{input:function(a){a.target.composing||(t.formdata.description=a.target.value)}}})])]),t._v(" "),e("tr",[e("td",{staticClass:"text-center"},[t._v("选择类别")]),t._v(" "),e("td",{staticClass:"p-lr-16"},[e("m-radio",{staticClass:"m-r8",attrs:{data:{label:"普通项目",value:"0"}},model:{value:t.formdata.mode,callback:function(a){t.formdata.mode=a},expression:"formdata.mode"}}),t._v(" "),e("m-radio",{staticClass:"m-r8",attrs:{data:{label:"基础服务",value:"1"}},model:{value:t.formdata.mode,callback:function(a){t.formdata.mode=a},expression:"formdata.mode"}}),t._v(" "),e("m-radio",{attrs:{data:{label:"应用组件",value:"2"}},model:{value:t.formdata.mode,callback:function(a){t.formdata.mode=a},expression:"formdata.mode"}})],1)]),t._v(" "),e("tr",[e("td",{staticClass:"text-center"},[t._v("项目来源")]),t._v(" "),e("td",{staticClass:"p-lr-16"},[e("div",{staticClass:"btn-group"},[e("m-btn",{staticClass:"primary_bg no-radius grey-dark_txt btn-github",class:t.gitLoadStyle,domProps:{innerHTML:t._s(t.git_tip)},nativeOn:{click:function(a){t.bindGitHub(a)}}})],1),t._v(" "),t.githubs.length>0?e("div",{staticClass:"git-list"},[e("table",{staticClass:"table hover striped machines-table theme-dft"},[e("thead",[e("tr",[e("th",[t._v("仓库名称")]),t._v(" "),e("th",[t._v("仓库路径")])])]),t._v(" "),e("tbody",t._l(t.githubs,function(a,i){return e("tr",[e("td",[e("m-radio",{attrs:{data:{label:a.repos_name,value:i+""}},model:{value:t.repos_idx,callback:function(a){t.repos_idx=a},expression:"repos_idx"}})],1),t._v(" "),e("td",[t._v(t._s(a.repos_url))])])}))])]):t._e()])])])]),t._v(" "),e("div",{staticClass:"p-16 text-center"},[e("m-btn",{staticClass:"primary_bg no-radius grey-dark_txt",nativeOn:{click:function(a){t.addProject(a)}}},[t._v(t._s(t.isEditor?"确定修改":"确定添加"))])],1)])],1)},staticRenderFns:[]}},183:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(146),s=function(t){return t&&t.__esModule?t:{default:t}}(i);a.default={mixins:[s.default],data:function(){return{formdata:{name:"",description:"",mode:"0"},repos_idx:"0",git_tip:"绑定github代码仓库",githubs:[],isEditor:!1,editorData:{}}},methods:{addProject:function(){var t=this,a=this.githubs[this.repos_idx];if(a){if(""===this.formdata.name)return void this.$toast("名称不能为空","cc");if(""===this.formdata.description)return void this.$toast("description不能为空","cc");this.formdata.repos_name=a.repos_name,this.formdata.repos_url=a.repos_url,this.$Global.async(this.isEditor?"project_update":"project_add",!0).getData(this.formdata).then(function(a){0===a.status&&(t.isEditor?t.$router.push({name:"ProjectDetail",params:{id:t.$route.params.id}}):t.$router.push({name:"Projects"})),t.$toast("添加成功","cc")},function(t){})}},bindGitHub:function(){-1===this.git_tip.indexOf("<img")&&this.getApiData()},getApiData:function(t){var a=this;this.git_tip='<img class="vam" src="./static/img/spin.gif"></img> <span class="vam">数据加载中</span>',this.$Global.async("project_repos",!0).getData().then(function(e){0===e.status?(a.githubs=e.data,a.repos_idx="0",a.git_tip="重新绑定github代码仓库",t&&t()):a.$toast(e.message,"cc")})},initReposIdx:function(){for(var t=-1;++t<this.githubs.length;){var a=this.githubs[t];if(a.repos_name===this.editorData.repos_name&&a.repos_url===this.editorData.repos_url){this.repos_idx=t+"";break}}},editorMode:function(){var t=this;this.$Global.async("project_detail",!0).getData(null,this.$route.params.id).then(function(a){if(0===a.status){var e=t.editorData=a.data[0];t.formdata.name=e.name,t.formdata.description=e.description,t.formdata.mode=e.mode+"",t.getApiData(t.initReposIdx)}})}},computed:{gitLoadStyle:function(){return-1!==this.git_tip.indexOf("<img")?"loading":""}},created:function(){this.isEditor=void 0!==this.$route.params.id,this.isEditor&&this.editorMode()}}},191:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(183),s=function(t){return t&&t.__esModule?t:{default:t}}(i);a.default={mixins:[s.default]}}});
//# sourceMappingURL=5.e09d0185fe57521dc4b0.js.map