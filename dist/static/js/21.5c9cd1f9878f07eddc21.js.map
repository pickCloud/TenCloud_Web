{"version":3,"sources":["webpack:///static/js/21.5c9cd1f9878f07eddc21.js","webpack:///./src/components/Messages.vue","webpack:///Messages.vue","webpack:///./src/components/Messages.vue?230a","webpack:///./src/components/Messages.vue?0c56","webpack:///./src/components/Messages.vue?b9af"],"names":["webpackJsonp","279","module","exports","__webpack_require__","Component","463","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_extends2","_extends3","_axios","_axios2","_vuex","data","type","searchWord","messages","page","isStillHave","mode","selects","label","selectValue","methods","mapMutations","selectType","this","getMessages","_this","isResetData","arguments","length","undefined","modeStr","http","then","d","forEach","item","push","iscroll","e","target","scrollHeight","scrollTop","offsetHeight","messagesType","messagesTip","code","messagesBtn","btn","list","tip","split","currentUser","companyList","cid","$toast","sub_mode","$router","name","query","UPDATE","id","$root","userinfo","params","created","$store","commit","cn","computed","mapState","beforeDestroy","watch","selectValue.value","n","_this2","typeStr","keyStr","$axios","498","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","535","content","locals","608","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","slot","_v","staticStyle","height","line-height","border-bottom","border-left","border-top","datas","sizeh","sizew","model","callback","$$v","expression","directives","rawName","placeholder","domProps","on","input","$event","composing","overflow","scroll","_l","status","_e","_s","update_time","click","staticRenderFns"],"mappings":"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","file":"static/js/21.5c9cd1f9878f07eddc21.js","sourcesContent":["webpackJsonp([21],{\n\n/***/ 279:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(535)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(463),\n  /* template */\n  __webpack_require__(608),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 463:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = __webpack_require__(53);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _axios = __webpack_require__(6);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _vuex = __webpack_require__(31);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  data: function data() {\n    return {\n      type: 0,\n      searchWord: '',\n      messages: [],\n      page: 1,\n      isStillHave: true,\n      mode: 1,\n      selects: [{ label: '全部', value: '0' }, { label: '加入企业', value: '1' }, { label: '企业变更', value: '2' }, { label: '离开企业', value: '3' }, { label: '添加主机', value: '4' }],\n      selectValue: { label: '全部', value: '0' }\n    };\n  },\n  methods: (0, _extends3.default)({}, (0, _vuex.mapMutations)('user', ['UPDATE']), {\n    selectType: function selectType(type) {\n      this.type = type;\n      this.page = 1;\n      this.messages = [];\n      this.isStillHave = true;\n      this.getMessages();\n    },\n    getMessages: function getMessages() {\n      var _this = this;\n\n      var isResetData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var modeStr = this.selectValue.value === '0' ? '' : '&mode=' + this.selectValue.value;\n      _axios2.default.http('message_get', '', 'get', '?page=' + this.page + modeStr).then(function (d) {\n        if (d.data) {\n          if (isResetData) {\n            _this.messages = d.data;\n          } else {\n            d.data.forEach(function (item) {\n              _this.messages.push(item);\n            });\n          }\n        } else {\n          _this.isStillHave = false;\n        }\n      });\n    },\n    iscroll: function iscroll(e) {\n      if (e.target.scrollHeight < e.target.scrollTop + e.target.offsetHeight + 1) {\n        if (this.isStillHave) {\n          this.page++;\n          this.getMessages();\n        }\n      }\n    },\n    messagesType: function messagesType(mode) {\n      switch (mode) {\n        case 1:\n          return '加入企业';\n        case 2:\n          return '企业变更';\n      }\n    },\n    messagesTip: function messagesTip(code) {\n      switch (code) {\n        case 1:\n          return '你可以核对信息后重新提交申请';\n        case 2:\n          return '你可以进入企业了';\n        case 3:\n          return '';\n        case 0:\n          return '';\n      }\n    },\n    messagesBtn: function messagesBtn(code) {\n      switch (code) {\n        case 1:\n          return '重新提交';\n        case 2:\n          return '进入企业';\n        case 3:\n          return '马上查看';\n        case 0:\n          return '马上审核';\n      }\n    },\n    btn: function btn(item) {\n      var list = [];\n      if (item.tip) list = item.tip.split(':');\n\n      var currentUser = {};\n      if (this.companyList.length > 0) {\n        this.companyList.forEach(function (item) {\n          if (item.cid + '' === list[0] + '') {\n            currentUser = item;\n            return false;\n          }\n        });\n      }\n      if (!currentUser.cid) {\n        this.$toast('已不存在此公司', 'cc');\n        return false;\n      }\n      switch (item.sub_mode) {\n        case 1:\n          return this.$router.push({ name: 'CompleteData', query: { code: list[1] } });\n        case 2:\n          this.UPDATE({ item: currentUser, id: this.$root.userinfo.id });\n          return this.$router.push({ name: 'FirmData', params: { id: list[0] } });\n        case 3:\n          this.UPDATE({ item: currentUser, id: this.$root.userinfo.id });\n          return this.$router.push({ name: 'FirmData', params: { id: list[0] } });\n        case 4:\n          return this.$router.push({ name: 'MachineDetail', params: { id: list[0] } });\n        case 0:\n          this.UPDATE({ item: currentUser, id: this.$root.userinfo.id });\n          return this.$router.push({ name: 'FirmData', params: { id: list[0] } });\n      }\n    }\n  }),\n  created: function created() {\n    this.getMessages();\n    this.$store.commit('sitepath/SET_PATH', [{ name: 'Main', cn: '主页' }, { cn: '消息' }]);\n  },\n\n  computed: (0, _extends3.default)({}, (0, _vuex.mapState)('navTop', ['companyList'])),\n  beforeDestroy: function beforeDestroy() {},\n\n  watch: {\n    'selectValue.value': function selectValueValue(n) {\n      this.page = 1;\n      this.getMessages(true);\n    },\n    'searchWord': function searchWord(n) {\n      var _this2 = this;\n\n      if (n) {\n        var typeStr = this.type === 0 ? '' : 'status=' + this.type;\n        var modeStr = this.selectValue.value === '0' ? '' : '&mode=' + this.selectValue.value;\n        var keyStr = '&keywords=' + n;\n        this.$axios.http('message_search', '', 'get', '?' + typeStr + modeStr + keyStr).then(function (d) {\n          if (d.data) {\n            _this2.messages = d.data;\n          }\n        });\n      } else {\n        this.getMessages();\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 498:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(265)();\n// imports\n\n\n// module\nexports.push([module.i, \".messages-type{color:#556278}.messages-content{width:450px}\", \"\", {\"version\":3,\"sources\":[\"/Users/zyb/TenCloud_Web/src/components/Messages.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,aAAe,CAChB,AACD,kBACE,WAAa,CACd\",\"file\":\"Messages.vue\",\"sourcesContent\":[\"\\n.messages-type {\\n  color: #556278;\\n}\\n.messages-content {\\n  width: 450px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 535:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(498);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(266)(\"3714e9c1\", content, true);\n\n/***/ }),\n\n/***/ 608:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"page-pad page-machine-detail\"\n  }, [_c('m-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('m-col', {\n    staticClass: \"xs-12\"\n  }, [_c('panel', {\n    staticClass: \"m-b16\"\n  }, [_c('div', {\n    staticClass: \"panel-title flex-space-between\",\n    attrs: {\n      \"slot\": \"title\"\n    },\n    slot: \"title\"\n  }, [_c('div', {\n    staticClass: \"flex-felx\"\n  }, [_c('div', {\n    staticClass: \"theme-dft\"\n  }, [_vm._v(\"消息列表\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-form_inp flex-space-between\",\n    staticStyle: {\n      \"height\": \"30px\",\n      \"line-height\": \"30px\"\n    }\n  }, [_c('m-select', {\n    staticStyle: {\n      \"border-bottom\": \"1px solid #464e5c\",\n      \"border-left\": \"1px solid #464e5c\",\n      \"border-top\": \"1px solid #464e5c\"\n    },\n    attrs: {\n      \"datas\": _vm.selects,\n      \"sizeh\": 36,\n      \"sizew\": 300\n    },\n    model: {\n      value: (_vm.selectValue),\n      callback: function($$v) {\n        _vm.selectValue = $$v\n      },\n      expression: \"selectValue\"\n    }\n  }), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.searchWord),\n      expression: \"searchWord\"\n    }],\n    staticStyle: {\n      \"height\": \"38px\",\n      \"line-height\": \"38px\"\n    },\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"输入关键字\"\n    },\n    domProps: {\n      \"value\": (_vm.searchWord)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.searchWord = $event.target.value\n      }\n    }\n  })], 1)]), _vm._v(\" \"), (_vm.messages.length > 0) ? _c('ul', {\n    staticClass: \"ul-li-border-bottom\",\n    staticStyle: {\n      \"overflow\": \"auto\",\n      \"height\": \"800px\"\n    },\n    on: {\n      \"scroll\": _vm.iscroll\n    }\n  }, _vm._l((_vm.messages), function(item) {\n    return _c('li', {\n      staticClass: \"flex-flex m-l16 p-b16 m-t16\"\n    }, [(item.status === 0) ? _c('div', {\n      staticClass: \"readpoint\"\n    }) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"m-l16\"\n    }, [_c('div', {\n      staticClass: \"messages-type m-b16\"\n    }, [_c('i', {\n      staticClass: \"iconfont icon-xiaoxi1\"\n    }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.messagesType(item.mode)))]), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(item.update_time))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"messages-content line-25\"\n    }, [_vm._v(\"\\n                \" + _vm._s(item.content) + \"\\n              \")]), _vm._v(\" \"), (item.mode !== 3) ? _c('div', {\n      staticClass: \"btn primary_txt\",\n      on: {\n        \"click\": function($event) {\n          _vm.btn(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm.messagesBtn(item.sub_mode) + ' >'))]) : _vm._e()])])\n  })) : _c('div', {\n    staticClass: \"p-16\",\n    staticStyle: {\n      \"overflow\": \"auto\",\n      \"height\": \"600px\"\n    }\n  }, [_vm._v(\"暂无消息\")])])], 1)], 1)], 1)])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/21.5c9cd1f9878f07eddc21.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-02cf56c6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Messages.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02cf56c6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Messages.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Messages.vue\n// module id = 279\n// module chunks = 21","<template>\n  <div >\n    <div class=\"page-pad page-machine-detail\" >\n      <m-row :gutter=\"16\">\n        <m-col class=\"xs-12\">\n          <panel class=\"m-b16\">\n            <div class=\"panel-title flex-space-between\" slot=\"title\">\n              <div class=\"flex-felx\">\n              <!--<m-btn class=\"btn theme-dft\" @click.native=\"selectType(0)\" :class=\"type==0?'select-active':''\">最新消息</m-btn>-->\n              <!--<m-btn class=\"btn theme-dft\" @click.native=\"selectType(1)\" :class=\"type==1?'select-active':''\">历史消息</m-btn>-->\n              <div class=\"theme-dft\">消息列表</div>\n              <!--<m-btn class=\"btn theme-dft\" @click.native=\"selectType(2)\" :class=\"type==2?'select-active':''\">最新通知</m-btn>-->\n              </div>\n              <div class=\"login-form_inp flex-space-between\" style=\"height: 30px;line-height: 30px\">\n                <m-select :datas=\"selects\" v-model=\"selectValue\" :sizeh=\"36\" :sizew=\"300\" style=\"border-bottom: 1px solid #464e5c;border-left: 1px solid #464e5c;border-top: 1px solid #464e5c;\"></m-select>\n                <input type=\"text\" placeholder=\"输入关键字\" v-model=\"searchWord\" style=\"height: 38px;line-height: 38px;\">\n              <!--<i class=\"iconfont icon-mima\" style=\"top: 0px;\"></i>-->\n              </div>\n            </div>\n            <ul class=\"ul-li-border-bottom\" v-if=\"messages.length>0\" style=\"overflow: auto;height: 800px\" @scroll=\"iscroll\">\n            <li class=\"flex-flex m-l16 p-b16 m-t16\" v-for=\"item in messages\" >\n              <!--<div>-->\n                <!--<img src=\"/static/img/spin.gif\" class=\"head\"/>-->\n              <!--</div>-->\n              <div class=\"readpoint\" v-if=\"item.status === 0\"></div>\n              <div class=\"m-l16\">\n                <div class=\"messages-type m-b16\">\n                  <i class=\"iconfont icon-xiaoxi1\"></i>\n                  <span>{{messagesType(item.mode)}}</span>\n                  <span>{{item.update_time}}</span>\n                </div>\n                <div class=\"messages-content line-25\">\n                  {{item.content}}\n                </div>\n                <!--<div class=\"m-b16\">{{messagesTip(item.sub_mode)}}</div>-->\n                <div class=\"btn primary_txt\" @click=\"btn(item)\" v-if=\"item.mode !== 3\">{{messagesBtn(item.sub_mode)+ ' >'}}</div>\n              </div>\n            </li>\n            </ul>\n            <div v-else class=\"p-16\" style=\"overflow: auto;height:600px\">暂无消息</div>\n          </panel>\n        </m-col>\n\n      </m-row>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from '../store/request/axios'\n  import {mapState, mapMutations} from 'vuex'\n  export default {\n    data: () => ({\n      type: 0,\n      searchWord: '',\n      messages: [],\n      page: 1,\n      isStillHave: true,\n      mode: 1,\n      selects: [{label: '全部', value: '0'}, {label: '加入企业', value: '1'}, {label: '企业变更', value: '2'}, {label: '离开企业', value: '3'}, {label: '添加主机', value: '4'}],\n      selectValue: {label: '全部', value: '0'}\n    }),\n    methods: {\n      ...mapMutations('user', ['UPDATE']),\n      selectType (type) {\n        this.type = type\n        this.page = 1\n        this.messages = []\n        this.isStillHave = true\n        this.getMessages()\n      },\n      getMessages (isResetData = false) {\n        let modeStr = this.selectValue.value === '0' ? '' : '&mode=' + this.selectValue.value\n        axios.http('message_get', '', 'get', '?page=' + this.page + modeStr).then(d => {\n          if (d.data) {\n            if (isResetData) {\n              this.messages = d.data\n            } else {\n              d.data.forEach((item) => {\n                this.messages.push(item)\n              })\n            }\n          } else {\n            this.isStillHave = false\n          }\n        })\n      },\n      iscroll (e) {\n        if (e.target.scrollHeight < e.target.scrollTop + e.target.offsetHeight + 1) {\n          if (this.isStillHave) {\n            this.page++\n            this.getMessages()\n          }\n        }\n      },\n      messagesType (mode) {\n        switch (mode) {\n          case 1:\n            return '加入企业'\n          case 2:\n            return '企业变更'\n        }\n      },\n      messagesTip (code) {\n        switch (code) {\n          case 1:\n            return '你可以核对信息后重新提交申请'\n          case 2:\n            return '你可以进入企业了'\n          case 3:\n            return ''\n          case 0:\n            return ''\n        }\n      },\n      messagesBtn (code) {\n        switch (code) {\n          case 1:\n            return '重新提交'\n          case 2:\n            return '进入企业'\n          case 3:\n            return '马上查看'\n          case 0:\n            return '马上审核'\n        }\n      },\n      btn (item) {\n        let list = []\n        if (item.tip) list = item.tip.split(':')\n        // list[0] company id : list[1] code\n        let currentUser = {}\n        if (this.companyList.length > 0) {\n          this.companyList.forEach(item => {\n            if (item.cid + '' === list[0] + '') {\n              currentUser = item\n              return false\n            }\n          })\n        }\n        if (!currentUser.cid) {\n          this.$toast('已不存在此公司', 'cc')\n          return false\n        }\n        switch (item.sub_mode) {\n          case 1:\n            return this.$router.push({name: 'CompleteData', query: {code: list[1]}})\n          case 2:\n            this.UPDATE({item: currentUser, id: this.$root.userinfo.id})\n            return this.$router.push({name: 'FirmData', params: {id: list[0]}})\n          case 3:\n            this.UPDATE({item: currentUser, id: this.$root.userinfo.id})\n            return this.$router.push({name: 'FirmData', params: {id: list[0]}})\n          case 4:\n            return this.$router.push({name: 'MachineDetail', params: {id: list[0]}})\n          case 0:\n            this.UPDATE({item: currentUser, id: this.$root.userinfo.id})\n            return this.$router.push({name: 'FirmData', params: {id: list[0]}})\n        }\n      }\n    },\n    created () {\n      this.getMessages()\n      this.$store.commit('sitepath/SET_PATH', [\n        {name: 'Main', cn: '主页'},\n        {cn: '消息'}\n      ])\n    },\n    computed: {\n      ...mapState('navTop', ['companyList'])\n    },\n    beforeDestroy () {\n    },\n    watch: {\n      'selectValue.value' (n) {\n        this.page = 1\n        this.getMessages(true)\n      },\n      'searchWord' (n) {\n        if (n) {\n          let typeStr = this.type === 0 ? '' : 'status=' + this.type\n          let modeStr = this.selectValue.value === '0' ? '' : '&mode=' + this.selectValue.value\n          let keyStr = '&keywords=' + n\n          this.$axios.http('message_search', '', 'get', '?' + typeStr + modeStr + keyStr).then(d => {\n            if (d.data) {\n              this.messages = d.data\n            }\n          })\n        } else {\n          this.getMessages()\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n.messages-type{\n  color: #556278;\n}\n  .messages-content{\n    width: 450px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Messages.vue?01776cb6","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".messages-type{color:#556278}.messages-content{width:450px}\", \"\", {\"version\":3,\"sources\":[\"/Users/zyb/TenCloud_Web/src/components/Messages.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,aAAe,CAChB,AACD,kBACE,WAAa,CACd\",\"file\":\"Messages.vue\",\"sourcesContent\":[\"\\n.messages-type {\\n  color: #556278;\\n}\\n.messages-content {\\n  width: 450px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-02cf56c6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Messages.vue\n// module id = 498\n// module chunks = 21","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-02cf56c6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Messages.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3714e9c1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-02cf56c6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Messages.vue\n// module id = 535\n// module chunks = 21","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"page-pad page-machine-detail\"\n  }, [_c('m-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('m-col', {\n    staticClass: \"xs-12\"\n  }, [_c('panel', {\n    staticClass: \"m-b16\"\n  }, [_c('div', {\n    staticClass: \"panel-title flex-space-between\",\n    attrs: {\n      \"slot\": \"title\"\n    },\n    slot: \"title\"\n  }, [_c('div', {\n    staticClass: \"flex-felx\"\n  }, [_c('div', {\n    staticClass: \"theme-dft\"\n  }, [_vm._v(\"消息列表\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"login-form_inp flex-space-between\",\n    staticStyle: {\n      \"height\": \"30px\",\n      \"line-height\": \"30px\"\n    }\n  }, [_c('m-select', {\n    staticStyle: {\n      \"border-bottom\": \"1px solid #464e5c\",\n      \"border-left\": \"1px solid #464e5c\",\n      \"border-top\": \"1px solid #464e5c\"\n    },\n    attrs: {\n      \"datas\": _vm.selects,\n      \"sizeh\": 36,\n      \"sizew\": 300\n    },\n    model: {\n      value: (_vm.selectValue),\n      callback: function($$v) {\n        _vm.selectValue = $$v\n      },\n      expression: \"selectValue\"\n    }\n  }), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.searchWord),\n      expression: \"searchWord\"\n    }],\n    staticStyle: {\n      \"height\": \"38px\",\n      \"line-height\": \"38px\"\n    },\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"输入关键字\"\n    },\n    domProps: {\n      \"value\": (_vm.searchWord)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.searchWord = $event.target.value\n      }\n    }\n  })], 1)]), _vm._v(\" \"), (_vm.messages.length > 0) ? _c('ul', {\n    staticClass: \"ul-li-border-bottom\",\n    staticStyle: {\n      \"overflow\": \"auto\",\n      \"height\": \"800px\"\n    },\n    on: {\n      \"scroll\": _vm.iscroll\n    }\n  }, _vm._l((_vm.messages), function(item) {\n    return _c('li', {\n      staticClass: \"flex-flex m-l16 p-b16 m-t16\"\n    }, [(item.status === 0) ? _c('div', {\n      staticClass: \"readpoint\"\n    }) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"m-l16\"\n    }, [_c('div', {\n      staticClass: \"messages-type m-b16\"\n    }, [_c('i', {\n      staticClass: \"iconfont icon-xiaoxi1\"\n    }), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.messagesType(item.mode)))]), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(item.update_time))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"messages-content line-25\"\n    }, [_vm._v(\"\\n                \" + _vm._s(item.content) + \"\\n              \")]), _vm._v(\" \"), (item.mode !== 3) ? _c('div', {\n      staticClass: \"btn primary_txt\",\n      on: {\n        \"click\": function($event) {\n          _vm.btn(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm.messagesBtn(item.sub_mode) + ' >'))]) : _vm._e()])])\n  })) : _c('div', {\n    staticClass: \"p-16\",\n    staticStyle: {\n      \"overflow\": \"auto\",\n      \"height\": \"600px\"\n    }\n  }, [_vm._v(\"暂无消息\")])])], 1)], 1)], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-02cf56c6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Messages.vue\n// module id = 608\n// module chunks = 21"],"sourceRoot":""}