webpackJsonp([6],{208:function(t,s,a){var e=a(5)(a(366),a(429),null,null);t.exports=e.exports},221:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a(87),i=function(t){return t&&t.__esModule?t:{default:t}}(e),n={theme:"comb-msg",hasClose:!1,buttons:[{label:"确定",theme:""},{label:"取消",theme:""}]};s.default={methods:{popperDelete:function(t,s){var a=this.$createElement;this.$confirm((0,i.default)({},n,{content:a("div",[a("img",{attrs:{src:"./static/img/error_icon.png",class:"vam m-r16"}}),a("span",{attrs:{class:"vam"}},t)])}),function(t){0===(arguments.length<=1?void 0:arguments[1])&&s&&s.call(),t.actionPopper(!1)})},popperInfo:function(t,s,a){this.$confirm((0,i.default)({},n,{content:t}),function(t){0===(arguments.length<=1?void 0:arguments[1])?s&&s.call():a&&a.call(),t.actionPopper(!1)})},popperWaiting:function(t){var s=this.$createElement;return this.$confirm({theme:"comb-msg",hasClose:!1,maskClose:!1,content:s("span",null,[s("img",{attrs:{src:"./static/img/spin.gif",class:"vam m-r8"}}),s("span",{attrs:{class:"vam"}},t)]),buttons:[]})}}}},222:function(t,s,a){t.exports=a.p+"static/img/spin.84f7c1b.gif"},224:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={business:{0:["运行中","primary_bg alpha-black_txt"],1:["已停止","pink_bg alpha-black_txt"],2:["启动中","primary_bg alpha-black_txt"],3:["停止中","pink_bg alpha-black_txt"],4:["满负载","pink_bg alpha-black_txt"]},machine:{Pending:["准备中","primary_bg alpha-black_txt","run"],Stopped:["已停止","pink_bg alpha-black_txt","stop"],Starting:["启动中","primary_bg alpha-black_txt","run","server_start"],Running:["运行中","primary_bg alpha-black_txt","run"],Stopping:["停止中","pink_bg alpha-black_txt","stop","server_stop"],Deleted:["已释放","pink_bg alpha-black_txt","stop"]},server:{server_start:[3,"Starting","Running","机器启动中，请耐心等待","开机"],server_stop:[30,"Stopping","Stopped","机器关机中，请耐心等待","关机"],server_reboot:[30,"Stopping","Running","机器重启中，请耐心等待","重启机器"]}}},226:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e={app_performance:["入量","出量","KB"],server_performance:["入带宽","出带宽","KB/S"]};s.default={data:function(){return{cpu:[],memory:[],block:[],disk:[],nets:[],maxChartNum:5}},methods:{formatDate:function(t){var s=this;return[t.map(function(t,a){return[new Date(1e3*t[0]).Format("yyyy/MM/dd hh:mm:ss"),t[1].percent,s.tipinfo(t)]})]},formatNet:function(t){var s=this;return[t.map(function(t,a){return[new Date(1e3*t[0]).Format("yyyy/MM/dd hh:mm:ss"),parseFloat(t[1].input),s.netTip(t)]}),t.map(function(t,s){return[new Date(1e3*t[0]).Format("yyyy/MM/dd hh:mm:ss"),parseFloat(t[1].output)]})]},netTip:function(t){var s=e[this.performance],a='<p class="tooltip-title">'+new Date(1e3*t[0]).Format("yyyy/MM/dd hh:mm:ss")+'</p><p class="tooltip-body">';return a+='<i class="tooltip-dian" style="background-color: #95c099;"></i>'+s[0]+"："+t[1].input+s[2],(a+='<br><i class="tooltip-dian" style="background-color: #eb6565;"></i>'+s[1]+"："+t[1].output+s[2])+"</p>"},tipinfo:function(t){var s=t[1],a='<p class="tooltip-title">'+new Date(1e3*t[0]).Format("yyyy/MM/dd hh:mm:ss")+'</p><p class="tooltip-body"><i class="tooltip-dian"></i>使用率：'+s.percent+"%";return s.free&&(a+='<br><i class="tooltip-dian"></i>空余：'+this.toG(s.free)+"G"),s.total&&(a+='<br><i class="tooltip-dian"></i>总量：'+this.toG(s.total)+"G"),a+"</p>"},toG:function(t){return(t/1024/1024/1024).toFixed(2)},getPerformance:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=new Date,e=new Date(a.getTime()-6e4*s);this.performanceData.start_time=Date.parse(e)/1e3,this.performanceData.end_time=Date.parse(a)/1e3,this.$Global.async(this.performance,!0).getData(this.performanceData).then(function(s){if(0===s.status){var a=s.data;a.cpu&&t.chartData("cpu",t.formatDate(a.cpu)),a.memory&&t.chartData("memory",t.formatDate(a.memory)),a.disk&&t.chartData("disk",t.formatDate(a.disk)),a.block&&t.chartData("block",t.formatNet(a.block)),a.net&&t.chartData("nets",t.formatNet(a.net)),t.temptimeout=setTimeout(function(s){t.getPerformance(1),clearTimeout(t.temptimeout)},6e4)}})},chartData:function(t,s){var a=this;s.forEach(function(s,e){a[t][e]||a.$set(a[t],e,{data:[]});var i=a[t][e].data;s.slice(-a.maxChartNum).forEach(function(t,s){i.slice(-1)[0]&&i.slice(-1)[0][0]===t[0]||(i.length>a.maxChartNum&&i.shift(),i.push(t))})})}},mounted:function(){this.getPerformance(60)},beforeDestroy:function(){this.temptimeout&&clearTimeout(this.temptimeout)}}},353:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={data:function(){return{isInfoEditor:!1,infoEditorTemp:{}}},methods:{getValueByKey:function(t){return t.split(".").reduce(function(t,s){return t[s]},this)},editorBegin:function(){var t=this;this.isInfoEditor=!0,this.editorElements||(this.editorElements=this.$el.querySelectorAll(".edirot-input")),this.editorElements.forEach(function(s,a){s.removeAttribute("readonly"),t.infoEditorTemp[s.dataset.key]=s.value})},editorSure:function(){var t=this,s={},a=!1;this.isInfoEditor=!1,this.editorElements.forEach(function(e,i){e.setAttribute("readonly","readonly");var n=t.getValueByKey(e.dataset.key);n!==t.infoEditorTemp[e.dataset.key]&&(s[e.dataset.name]=n,a=!0)}),a&&(s.id=this.$route.params.id,this.$Global.async(this.updateApi,!0).getData(s).then(function(s){t.$toast(s.message,"cc")}))},setValueBuKey:function(t,s){var a=this,e=t.split(".");e.forEach(function(t,i){i===e.length-1?a[t]=s:a=a[t]})},editorCancel:function(){var t=this;this.isInfoEditor=!1,this.editorElements.forEach(function(s,a){s.setAttribute("readonly","readonly"),t.setValueBuKey(s.dataset.key,t.infoEditorTemp[s.dataset.key])})}}}},355:function(t,s,a){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});var i=a(28),n=e(i),o=a(224),l=e(o),r=a(353),c=e(r),p=a(226),u=e(p),m=a(221),d=e(m);s.default={mixins:[u.default,c.default,d.default],data:function(){return{baseInfo:{cluster_id:-1,cluster_name:""},businessInfo:{contract:{},provider:""},sysInfo:{config:{}},applists:[],machineid:-1,isWaiting:!1,waitingTip:"",isOpen:!1,isDisabled:!1,updateApi:"server_update",performance:"server_performance",performanceData:{}}},methods:{getApiData:function(){var t=this;this.performanceData.id=this.machineid=this.$route.params.id,this.$Global.async("server_detail",!0).getData(null,this.machineid).then(function(s){0===s.status&&(t.baseInfo=s.data.basic_info,t.businessInfo=s.data.business_info,t.sysInfo=s.data.system_info,"run"===t.machineStatus[2]&&(t.isOpen=!0),"stop"===t.machineStatus[2]&&(t.isOpen=!1),t.statusApiSuf=t.baseInfo.instance_id+"/status","Starting"!==t.baseInfo.machine_status&&"Stopping"!==t.baseInfo.machine_status||t.loopGetStatus(t.machineStatus[3]))}),this.$Global.async("server_containers",!0).getData(null,this.machineid).then(function(s){0===s.status&&(t.applists=s.data)})},machineChange:function(){this.isDisabled=!0,this.isOpen?this.machineCtr("server_start"):this.machineCtrPop("server_stop")},machineCtrPop:function(t){var s=this,a=l.default.server[t];this.popperInfo("您确定要 "+a[4]+" 吗?",function(a){s.machineCtr(t)},function(t){s.isOpen=!s.isOpen,s.isDisabled=!1})},machineCtr:function(t){var s=this;this.$Global.async(t,!0).getData(null,this.machineid).then(function(a){0===a.status?s.loopGetStatus(t):s.$toast(a.message,"cc")},function(t){console.log(void 0===t?"undefined":(0,n.default)(t))})},loopGetStatus:function(t){var s=this,a=l.default.server[t];this.waitingTip=a[3],this.isWaiting=!0,this.baseInfo.machine_status=a[1],this.yqvalue=a[2],this.loopIV=setInterval(function(t){s.$Global.async("server_status",!0).getData(null,s.statusApiSuf).then(function(t){0===t.status&&(s.baseInfo.machine_status=t.data,t.data===s.yqvalue&&(s.isWaiting=!1,s.isDisabled=!1,clearInterval(s.loopIV)))})},1e3*a[0])},deleteMachine:function(){var t=this;this.popperDelete(this.baseInfo.name,function(s){t.$Global.async("server_del",!0).getData({id:[t.$route.params.id]}).then(function(s){0===s.status&&t.$router.push({name:"Machines"}),t.$toast(s.message,"cc")})})}},computed:{businessStatus:function(){return l.default.business[this.baseInfo.business_status]||[]},machineStatus:function(){return l.default.machine[this.baseInfo.machine_status]||[]}},created:function(){this.getApiData()},beforeDestroy:function(){this.loopIV&&clearInterval(this.loopIV)}}},366:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a(355),i=function(t){return t&&t.__esModule?t:{default:t}}(e);s.default={mixins:[i.default]}},429:function(t,s,a){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-pad page-machine-detail"},[e("m-row",{attrs:{gutter:16}},[e("m-col",{staticClass:"xs-12 lg-8"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",slot:"title"},[e("span",{staticClass:"bold m-r8"},[t._v("监控")])]),t._v(" "),e("m-row",{staticClass:"mdc-chart",attrs:{gutter:16}},[e("m-col",{staticClass:"xs-12 lg-6"},[e("panel",{staticClass:"p-b16",attrs:{title:"CPU(%)"}},[e("div",{staticClass:"panel-body"},[e("e-line",{attrs:{series:t.cpu}})],1)])],1),t._v(" "),e("m-col",{staticClass:"xs-12 lg-6"},[e("panel",{staticClass:"p-b16",attrs:{title:"内存(%)"}},[e("div",{staticClass:"panel-body"},[e("e-line",{attrs:{series:t.memory,colors:[["#eb6565","rgba(235,101,101,1)","rgba(235,101,101,0)"]]}})],1)])],1),t._v(" "),e("m-col",{staticClass:"xs-12 lg-6"},[e("panel",{staticClass:"p-b16",attrs:{title:"硬盘使用情况(%)"}},[e("div",{staticClass:"panel-body"},[e("e-line",{attrs:{series:t.disk,colors:[["#95c099","rgba(93,117,103,1)","rgba(93,117,103,0)"]]}})],1)])],1),t._v(" "),e("m-col",{staticClass:"xs-12 lg-6"},[e("panel",{staticClass:"p-b16",attrs:{title:"网络"}},[e("div",{staticClass:"panel-body"},[e("e-line",{attrs:{series:t.nets,colors:[["#95c099","rgba(93,117,103,1)","rgba(93,117,103,0)"],["#eb6565","rgba(235,101,101,1)","rgba(235,101,101,0)"]]}})],1)])],1)],1)],1)],1),t._v(" "),e("m-col",{staticClass:"xs-12 lg-4"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title clearfix",slot:"title"},[e("span",{staticClass:"bold"},[t._v("基本信息")]),t._v(" "),e("span",{staticClass:"right editor-btn-group"},[t.isInfoEditor?t._e():e("span",{on:{click:t.editorBegin}},[e("m-btn",{attrs:{sizeh:-1}},[e("span",{staticClass:"vam"},[t._v("修改")]),t._v(" "),e("i",{staticClass:"icon icon-editor vam"})])],1),t._v(" "),t.isInfoEditor?e("span",{on:{click:t.editorSure}},[e("m-btn",{attrs:{sizeh:-1}},[t._v("确定")])],1):t._e(),t._v(" "),t.isInfoEditor?e("span",{on:{click:t.editorCancel}},[e("m-btn",{attrs:{sizeh:-1}},[t._v("取消")])],1):t._e()])]),t._v(" "),e("div",{staticClass:"panel-list mcd-ctrl-group"},[e("div",{staticClass:"mcd-ctrl-item"},[t.isWaiting?t._e():e("span",[t._v("开机/关机 "),e("m-switch",{staticClass:"switchMachine",attrs:{disabled:t.isDisabled,sizeh:-1},on:{change:t.machineChange},model:{value:t.isOpen,callback:function(s){t.isOpen=s},expression:"isOpen"}})],1)]),t._v(" "),e("div",{staticClass:"mcd-ctrl-item"},["run"!==t.machineStatus[2]||t.isWaiting?t._e():e("m-btn",{attrs:{sizeh:-1},nativeOn:{click:function(s){t.machineCtrPop("server_reboot")}}},[e("span",{staticClass:"vam"},[t._v("重启")]),t._v(" "),e("i",{staticClass:"icon icon-zhongzhi vam"})])],1),t._v(" "),e("div",{staticClass:"mcd-ctrl-item"},[e("m-btn",{attrs:{sizeh:-1},nativeOn:{click:function(s){t.deleteMachine(s)}}},[e("span",{staticClass:"vam"},[t._v("删除")]),t._v(" "),e("i",{staticClass:"icon icon-delete vam"})])],1),t._v(" "),e("span",{staticClass:"justify_fix"})]),t._v(" "),t.isWaiting?e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-12"},[e("img",{staticClass:"vam",attrs:{src:a(222),alt:""}}),t._v(" "),e("span",{staticClass:"vam"},[t._v(t._s(t.waitingTip))])])],1):t._e(),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("名称")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.baseInfo.name,expression:"baseInfo.name"}],staticClass:"edirot-input",attrs:{type:"text","data-key":"baseInfo.name","data-name":"name",readonly:""},domProps:{value:t.baseInfo.name},on:{input:function(s){s.target.composing||(t.baseInfo.name=s.target.value)}}})])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("服务商")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.businessInfo.provider))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("地址")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.baseInfo.address))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("IP")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.baseInfo.public_ip))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("状态")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[e("span",{staticClass:"plate",class:t.machineStatus[1]},[t._v(t._s(t.machineStatus[0]))])])],1)],1),t._v(" "),e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title clearfix",slot:"title"},[e("span",{staticClass:"bold"},[t._v("配置信息")])]),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("操作系统")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.sysInfo.config.os_name))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("系统类型")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.sysInfo.config.os_type))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("CPU")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(t.sysInfo.config.cpu))])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"},[t._v("内存")]),t._v(" "),e("m-col",{staticClass:"xs-8"},[t._v(t._s(parseInt(t.sysInfo.config.memory)/1024)+"G")])],1),t._v(" "),e("m-row",{staticClass:"panel-list"},[e("m-col",{staticClass:"xs-4"}),t._v(" "),e("m-col",{staticClass:"xs-8"})],1)],1)],1),t._v(" "),e("m-col",{staticClass:"xs-12"},[e("panel",{staticClass:"p-b16 m-b16"},[e("div",{staticClass:"panel-title",slot:"title"},[e("span",{staticClass:"m-r8"},[t._v("容器列表")]),t._v(" "),e("small",[t._v("(容器: 独立运行的一个或一组应用，以及它们的运行生态环境)\t")])]),t._v(" "),e("div",{staticClass:"panel-body"},[e("m-table",{staticClass:"hover striped block-table centered"},[e("col",{attrs:{width:"15%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"25%"}}),t._v(" "),e("col",{attrs:{width:"15%"}}),t._v(" "),e("thead",[e("tr",[e("th",[t._v("containerID")]),t._v(" "),e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("状态")]),t._v(" "),e("th",[t._v("更新时间")]),t._v(" "),e("th",[t._v("操作")])])]),t._v(" "),e("tbody",t._l(t.applists,function(s){return e("tr",[e("td",[t._v(t._s(s[0]))]),t._v(" "),e("td",[t._v(t._s(s[1]))]),t._v(" "),e("td",[t._v(t._s(s[2]))]),t._v(" "),e("td",[t._v(t._s(s[3]))]),t._v(" "),e("td",[e("m-btn",{staticClass:"primary_txt",attrs:{href:{name:"AppDetail",params:{mid:t.$route.params.id,name:s[1],cid:s[0]}}}},[t._v("详情")])],1)])}))])],1)])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.d3cce56a17679b414dc2.js.map