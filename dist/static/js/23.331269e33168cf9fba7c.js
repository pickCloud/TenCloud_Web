webpackJsonp([23],{281:function(t,s,e){var a=e(0)(e(465),e(610),null,null);t.exports=a.exports},298:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={methods:{isShow:function(t){return!this.$store.state.user.currentUser.cid||this.$store.state.user.currentUser.is_admin||-1!==this.$store.state.user.currentPermission.indexOf(this.$store.state.user.permissions[t])}}}},446:function(t,s,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});var i=e(52),r=a(i),n=e(31),_=e(298),l=a(_),o={0:["初创建","primary_bg alpha-black_txt"],1:["构建中","primary_bg alpha-black_txt"],2:["构建成功","primary_bg alpha-black_txt"],3:["部署中","primary_bg alpha-black_txt"],4:["部署成功","primary_bg alpha-black_txt"],"-2":["构建失败","pink_bg alpha-black_txt"],"-4":["部署失败","pink_bg alpha-black_txt"]},v=["普通项目","基础服务","应用组件"];s.default={mixins:[l.default],data:function(){return{base:{},vers:[],containers:[]}},methods:(0,r.default)({},(0,n.mapActions)("mechineDetail",["getServerOperation"]),{getApiData:function(){var t=this;this.$axios.http("project_detail","","get",this.$route.params.id).then(function(s){0===s.status&&(t.base=s.data[0],t.getVerList(),t.getContainerList(),t.$store.commit("sitepath/SET_PATH",[{name:"Main",cn:"主页"},{name:"Projects",cn:"项目列表"},{cn:t.base.name}]))}),this.getServerOperation({object_type:2,object_id:this.$route.params.id})},getVerList:function(){var t=this;this.$axios.http("project_vers","","get",this.base.name+"/versions").then(function(s){0===s.status&&(t.vers=s.data)})},editorHandle:function(){this.$router.push({name:"ProjectEditor",params:{id:this.$route.params.id}})},build:function(){this.$router.push({name:"Build",params:{name:this.base.name,repos_url:this.base.repos_url,repos_name:this.base.repos_name,id:this.$route.params.id,image_name:this.base.image_name}})},deploy:function(){0===this.vers.length?this.$toast("请先进行版本构建","cc"):this.$router.push({name:"Deploy",params:{id:this.$route.params.id,name:this.base.name,type:"deploy",image_name:this.base.image_name}})},gotVerListMore:function(){this.$router.push({name:"Verlist",params:{verlist:this.vers,id:this.$route.params.id,name:this.base.name,image_name:this.base.image_name}})},getContainerList:function(){var t=this;this.base.deploy_ips&&0!==this.base.deploy_ips.length&&""!==this.base.deploy_ips&&this.$axios.http("project_container_list",{container_list:this.base.deploy_ips,container_name:this.base.container_name},"post").then(function(s){0===s.status&&(t.containers=s.data)})}}),computed:(0,r.default)({pstatus:function(){return void 0!==this.base.status?o[this.base.status+""][0]:""},pclass:function(){return void 0!==this.base.status?o[this.base.status+""][1]:""},imgSource:function(){return 0===this.base.image_source?"代码仓库":"外部镜像"},modecn:function(){return v[this.base.mode]},verLimit:function(){return this.vers.slice(0,5)}},(0,n.mapState)("mechineDetail",["operations"])),created:function(){this.getApiData()}}},465:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(446),i=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default={mixins:[i.default]}},610:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-pad page-project-detail"},[e("m-row",{attrs:{gutter:16}},[e("m-col",{staticClass:"xs-12 lg-8"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[e("span",[t._v("基本信息")]),t._v(" "),e("div",{staticClass:"right",staticStyle:{"margin-top":"-5px"}},[t.isShow("build_project")?e("m-btn",{staticClass:"primary_bg grey-dark_txt",nativeOn:{click:function(s){t.build(s)}}},[t._v("版本构建")]):t._e(),t._v(" "),t.isShow("deploy_project")?e("m-btn",{staticClass:"primary_bg grey-dark_txt m-r16",nativeOn:{click:function(s){t.deploy(s)}}},[t._v("项目部署")]):t._e(),t._v(" "),t.isShow("modify_project_info")?e("m-btn",{staticClass:"primary_bg grey-dark_txt",nativeOn:{click:function(s){t.editorHandle(s)}}},[e("span",{staticClass:"vam"},[t._v("修改")]),t._v(" "),e("i",{staticClass:"iconfont icon-xiugai vam"})]):t._e()],1)]),t._v(" "),e("table",{staticClass:"list-table"},[e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"80%"}}),t._v(" "),e("tfoot",[e("tr",[e("td",[t._v("名称")]),t._v(" "),e("td",[t._v(t._s(t.base.name))])]),t._v(" "),e("tr",[e("td",[t._v("描述")]),t._v(" "),e("td",[t._v(t._s(t.base.description))])]),t._v(" "),e("tr",[e("td",[t._v("项目类型")]),t._v(" "),e("td",[t._v(t._s(t.modecn))])]),t._v(" "),e("tr",[e("td",[t._v("镜像名称")]),t._v(" "),e("td",[t._v(t._s(t.base.image_name))])]),t._v(" "),e("tr",[e("td",[t._v("项目来源")]),t._v(" "),e("td",[e("span",{staticClass:"m-r8"},[t._v(t._s(t.imgSource))])])]),t._v(" "),e("tr",[e("td",[t._v("创建时间")]),t._v(" "),e("td",[t._v(t._s(t.base.create_time))])]),t._v(" "),e("tr",[e("td",[t._v("状态")]),t._v(" "),e("td",[e("span",{staticClass:"vam plate",class:[t.pclass]},[t._v(t._s(t.pstatus))])])]),t._v(" "),e("tr",[e("td",[t._v("更新时间")]),t._v(" "),e("td",[t._v(t._s(t.base.update_time))])])])])]),t._v(" "),e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[t._v("容器列表")]),t._v(" "),e("div",{staticClass:"panel-body"},[e("table",{staticClass:"table hover striped theme-dft pad-table"},[e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("col",{attrs:{width:"20%"}}),t._v(" "),e("thead",[e("tr",[e("th",[t._v("容器名称")]),t._v(" "),e("th",[t._v("容器ID")]),t._v(" "),e("th",[t._v("状态")]),t._v(" "),e("th",[t._v("创建时间")]),t._v(" "),e("th",[t._v("操作")])])]),t._v(" "),e("tbody",t._l(t.containers,function(s){return e("tr",[e("td",[t._v(t._s(s[1]))]),t._v(" "),e("td",[t._v(t._s(s[0]))]),t._v(" "),e("td",[t._v(t._s(s[2]))]),t._v(" "),e("td",[t._v(t._s(s[3]))]),t._v(" "),e("td",[e("m-btn",{staticClass:"primary_txt",attrs:{href:{name:"AppDetail",params:{mid:s[4],name:s[1],cid:s[0],itemName:t.base.name}}}},[t._v("详情")])],1)])}))])])]),t._v(" "),e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[t._v("日志")]),t._v(" "),e("div",{staticClass:"panel-body"},[e("table",{staticClass:"table hover striped theme-dft pad-table"},[e("col",{attrs:{width:"25%"}}),t._v(" "),e("col",{attrs:{width:"25%"}}),t._v(" "),e("col",{attrs:{width:"25%"}}),t._v(" "),e("col",{attrs:{width:"25%"}}),t._v(" "),e("thead",[e("tr",[e("th",[t._v("时间")]),t._v(" "),e("th",[t._v("行为")]),t._v(" "),e("th",[t._v("状态")]),t._v(" "),e("th",[t._v("操作人")])])]),t._v(" "),e("tbody",t._l(t.operations,function(s){return e("tr",[e("td",[t._v(t._s(s.created_time))]),t._v(" "),e("td",[t._v(t._s(1===s.operation?"关机":0===s.operation?"开机":"重启"))]),t._v(" "),e("td",[t._v(t._s(0===s.operation_status?"成功":"失败"))]),t._v(" "),e("td",[t._v(t._s(s.user))])])}))])])])],1),t._v(" "),e("m-col",{staticClass:"xs-12 lg-4"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[e("span",{staticClass:"title"},[t._v("版本列表")]),t._v(" "),e("m-btn",{staticClass:"right",attrs:{sizeh:-1},nativeOn:{click:function(s){t.gotVerListMore(s)}}},[t._v("更多")])],1),t._v(" "),e("div",{staticClass:"panel-body p-b16"},[e("table",{staticClass:"table hover striped theme-dft pad-table"},[e("col",{attrs:{width:"30%"}}),t._v(" "),e("col",{attrs:{width:"40%"}}),t._v(" "),e("col",{attrs:{width:"30%"}}),t._v(" "),e("thead",[e("tr",[e("th",[t._v("版本号")]),t._v(" "),e("th",[t._v("更新时间")]),t._v(" "),e("th",[t._v("操作")])])]),t._v(" "),e("tbody",t._l(t.verLimit,function(s){return e("tr",[e("td",[t._v(t._s(s.version))]),t._v(" "),e("td",[t._v(t._s(s.update_time))]),t._v(" "),e("td",[e("m-btn",{staticClass:"primary_txt",attrs:{href:{name:"VerNotes",params:{v:s.version,pname:t.base.name}}},nativeOn:{click:function(t){}}},[t._v("日志")])],1)])}))])])]),t._v(" "),e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[t._v("数据分析")])]),t._v(" "),e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[t._v("其他")])])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=23.331269e33168cf9fba7c.js.map