webpackJsonp([2],{138:function(t,s,e){var a=e(7)(e(181),e(200),null,null);t.exports=a.exports},171:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(196),i=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default={data:function(){return{verdata:[],branchs:[],branch:"1",version:{version:""}}},methods:{getVerList:function(){var t=this;this.$Global.async("project_vers",!0).getData(null,this.$route.params.name+"/versions").then(function(s){0===s.status&&(t.verdata=s.data)})},getBranch:function(){var t=this;this.$Global.async("project_branch",!0).getData(null,this.$route.params.repos_name).then(function(s){0===s.status&&(t.branchs=s.data,t.branch=t.branchs[0].branch_name)})},startBuild:function(){var t=this;if(0!==this.branchs.length){var s={prj_name:this.$route.params.name,version:this.version.version+"",branch_name:this.branch,repos_url:this.$route.params.repos_url};if(""===s.version)return void this.$toast("请输入版本号","cc");this.$Global.async("project_create",!0).getData(s).then(function(s){0===s.status&&t.$router.push({name:"ProjectDetail",params:{id:t.$route.params.id}}),t.$toast(s.message,"cc")})}}},created:function(){this.$route.params.repos_url?(this.getVerList(),this.getBranch()):this.$router.push({name:"ProjectDetail",params:{id:this.$route.params.id}})},components:{dlist:i.default}}},181:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(171),i=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default={mixins:[i.default]}},190:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(195);s.default={directives:{focus:a.focus},props:{items:{type:Array,default:function(t){return[]}},okey:{type:String,default:"key"},value:{type:Object}},data:function(){return{dataitems:[],selfmodel:"",isfocus:!1}},methods:{inpChange:function(){var t={};t[this.okey]=this.selfmodel,this.$emit("input",t)},onFocus:function(){this.isfocus=!0,this.search()},onBlur:function(t){},search:function(){var t=this;this.dataitems=this.items.filter(function(s,e){if(0===s[t.okey].toString().indexOf(t.selfmodel))return s})},itemSelect:function(t){this.$emit("input",t),this.isfocus=!1}},watch:{value:function(t,s){this.selfmodel=this.value?this.value[this.okey]:"",this.search()}},mounted:function(){this.selfmodel=this.value?this.value[this.okey]:""}}},193:function(t,s,e){s=t.exports=e(136)(),s.push([t.i,".data-list{position:relative;z-index:999}.data-list-item{padding:16px;border-top:1px solid #262a35;cursor:pointer}.data-list-item:hover{background-color:hsla(0,0%,100%,.1)}.data-list-items{background-color:#1d212a;position:absolute;left:0;width:100%}","",{version:3,sources:["D:/FrontEnd-JIMU/src/components/piece/datalist/Main.vue"],names:[],mappings:"AACA,WACE,kBAAmB,AACnB,WAAa,CACd,AACD,gBACE,aAAc,AACd,6BAA8B,AAC9B,cAAgB,CACjB,AACD,sBACE,mCAAwC,CACzC,AACD,iBACE,yBAA0B,AAC1B,kBAAmB,AACnB,OAAQ,AACR,UAAY,CACb",file:"Main.vue",sourcesContent:["\n.data-list {\n  position: relative;\n  z-index: 999;\n}\n.data-list-item {\n  padding: 16px;\n  border-top: 1px solid #262a35;\n  cursor: pointer;\n}\n.data-list-item:hover {\n  background-color: rgba(255,255,255,0.1);\n}\n.data-list-items {\n  background-color: #1d212a;\n  position: absolute;\n  left: 0;\n  width: 100%;\n}\n"],sourceRoot:""}])},194:function(t,s,e){var a=e(193);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(147)("0529a434",a,!0)},195:function(t,s,e){"use strict";var a=e(15);a="default"in a?a.default:a;/^2\./.test(a.version)||a.util.warn("VueFocus 2.1.0 only supports Vue 2.x, and does not support Vue "+a.version);var i={inserted:function(t,s){s.value?t.focus():t.blur()},componentUpdated:function(t,s){s.modifiers.lazy&&Boolean(s.value)===Boolean(s.oldValue)||(s.value?t.focus():t.blur())}},n={directives:{focus:i}};s.version="2.1.0",s.focus=i,s.mixin=n},196:function(t,s,e){e(194);var a=e(7)(e(190),e(197),null,null);t.exports=a.exports},197:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"data-list"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selfmodel,expression:"selfmodel"}],attrs:{type:"text",placeholder:"输入/选择版本号"},domProps:{value:t.selfmodel},on:{input:[function(s){s.target.composing||(t.selfmodel=s.target.value)},t.inpChange],blur:t.onBlur,focus:t.onFocus}}),t._v(" "),t.isfocus&&t.dataitems.length>0?e("div",{staticClass:"data-list-items"},t._l(t.dataitems,function(s){return e("div",{staticClass:"data-list-item",on:{click:function(e){t.itemSelect(s)}}},[t._v(t._s(s[t.okey]))])})):t._e()])},staticRenderFns:[]}},200:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-pad page-build"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",slot:"title"},[t._v("\n      项目构建\n      "),e("small",[t._v("(代码经过构建，可生成能适合部署上线的版本，版本文件以镜像的形式存在。)")])]),t._v(" "),e("div",{staticClass:"p-16"},[e("ul",{staticClass:"clearfix build-step"},[e("li",[t._v("1.编写Dockerfile文件")]),t._v(" "),e("li",[t._v("2.输入版本号")]),t._v(" "),e("li",[t._v("3.选择代码分支")]),t._v(" "),e("li",[t._v("4.开始构建")])]),t._v(" "),e("ul",{staticClass:"build-intro clearfix"},[e("li",[e("div",{staticClass:"__txt"},[t._v("镜像：由多层文件系统联合组成，除了提供运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数。")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("镜像的构建就是定制每一层的配置、文件。我们把每一层的修改、安装、构建、操作的命令写入Dockerfile脚本文件，方便重复操作、透明化构建过程。")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("Dockerfile文件可存于代码仓库的项目文件夹根目录")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("Dockerfile语法规则参考："),e("a",{staticClass:"primary_txt",attrs:{href:"https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/",target:"_blank"}},[t._v("https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("我们的私有镜像："),e("a",{staticClass:"primary_txt",attrs:{href:"https://www.jmkbio.com/harbor/sign-in",target:"_blank"}},[t._v("https://www.jmkbio.com/harbor/sign-in")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("公有镜像参考地址："),e("a",{staticClass:"primary_txt m-r8",attrs:{href:"https://hub.docker.com",target:"_blank"}},[t._v("https://hub.docker.com")]),t._v(" "),e("a",{staticClass:"primary_txt",attrs:{href:"https://dashboard.daocloud.io/packages/explore",target:"_blank"}},[t._v("https://dashboard.daocloud.io/packages/explore")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("以上，仍然不知道Dockerfile如何写的，可以联系我们的工程师，@洪炯腾 @洪国安")]),t._v(" "),e("div",{staticClass:"__icon"})])]),t._v(" "),e("div",{staticClass:"build-form"},[e("m-row",{staticClass:"m-b16",attrs:{gutter:16}},[e("m-col",{staticClass:"xs-12 md-3 lg-2"},[e("div",{staticClass:"title"},[t._v("版本号")])]),t._v(" "),e("m-col",{staticClass:"xs-12 md-9 lg-10"},[e("dlist",{attrs:{okey:"version"},model:{value:t.version,callback:function(s){t.version=s},expression:"version"}})],1)],1),t._v(" "),e("m-row",{staticClass:"branch m-b16"},[e("m-col",{staticClass:"xs-12"},[e("div",{staticClass:"title"},[t._v("选择分支")])]),t._v(" "),e("m-col",{staticClass:"xs-12"},[e("div",{staticClass:"title"},t._l(t.branchs,function(s,a){return e("m-radio",{key:a,attrs:{data:{label:s.branch_name}},model:{value:t.branch,callback:function(s){t.branch=s},expression:"branch"}})}))])],1),t._v(" "),e("div",{staticClass:"save-box text-center"},[e("m-btn",{staticClass:"primary_bg grey-dark_txt",nativeOn:{click:function(s){t.startBuild(s)}}},[t._v("开始构建")])],1)],1)])]),t._v(" "),e("panel",{attrs:{title:"构建过程"}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.ad04c58450921316849f.js.map