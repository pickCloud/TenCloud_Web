webpackJsonp([2],{137:function(t,s,i){i(214);var e=i(7)(i(189),i(228),null,null);t.exports=e.exports},152:function(t,s,i){t.exports=i.p+"static/img/spin.84f7c1b.gif"},179:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(219),a=function(t){return t&&t.__esModule?t:{default:t}}(e);s.default={data:function(){return{verdata:[],branchs:[],branch:"1",isDoing:!1,isOpen:!1,notes:[],version:{version:""}}},methods:{openIntro:function(){this.isOpen=!this.isOpen},getVerList:function(){var t=this;this.$Global.async("project_vers",!0).getData(null,this.$route.params.name+"/versions").then(function(s){0===s.status&&(t.verdata=s.data)})},getBranch:function(){var t=this;this.$Global.async("project_branch",!0).getData(null,this.$route.params.repos_name).then(function(s){0===s.status&&(t.branchs=s.data,t.branch=t.branchs[0].branch_name)})},startBuild:function(){var t=this;if(0!==this.branchs.length){var s={prj_name:this.$route.params.name,image_name:this.$route.params.image_name,version:(this.version.version+"").replace(/(^\s+)|(\s+$)/g,""),branch_name:this.branch,repos_url:this.$route.params.repos_url};if(""===s.version)return void this.$toast("请输入版本号","cc");this.isDoing=!0,this.$Global.async("project_create",!0).getData(s).then(function(s){0===s.status&&(t.notes=s.data),t.$toast(s.message,"cc"),t.isDoing=!1})}}},created:function(){this.$route.params.repos_url?(this.getVerList(),this.getBranch()):this.$router.replace({name:"ProjectDetail",params:{id:this.$route.params.id}})},components:{dlist:a.default}}},189:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(179),a=function(t){return t&&t.__esModule?t:{default:t}}(e);s.default={mixins:[a.default]}},199:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(218);s.default={directives:{focus:e.focus},props:{items:{type:Array,default:function(t){return[]}},okey:{type:String,default:"key"},value:{type:Object}},data:function(){return{dataitems:[],selfmodel:"",isfocus:!1}},methods:{inpChange:function(){var t={};t[this.okey]=this.selfmodel,this.$emit("input",t)},onFocus:function(){this.isfocus=!0,this.search()},onBlur:function(t){var s=this,i=setTimeout(function(t){clearTimeout(i),s.isfocus=!1},150)},search:function(){var t=this;this.dataitems=this.items.filter(function(s,i){if(0===s[t.okey].toString().indexOf(t.selfmodel))return s})},itemSelect:function(t){this.$emit("input",t),this.isfocus=!1}},watch:{value:function(t,s){this.selfmodel=this.value?this.value[this.okey]:"",this.search()}},mounted:function(){this.selfmodel=this.value?this.value[this.okey]:""}}},206:function(t,s,i){s=t.exports=i(134)(),s.push([t.i,".data-list{position:relative;z-index:999}.data-list-item{padding:16px;border-top:1px solid #262a35;cursor:pointer}.data-list-item:hover{background-color:hsla(0,0%,100%,.1)}.data-list-items{background-color:#1d212a;position:absolute;left:0;width:100%}","",{version:3,sources:["D:/FrontEnd-JIMU/src/components/piece/datalist/Main.vue"],names:[],mappings:"AACA,WACE,kBAAmB,AACnB,WAAa,CACd,AACD,gBACE,aAAc,AACd,6BAA8B,AAC9B,cAAgB,CACjB,AACD,sBACE,mCAAwC,CACzC,AACD,iBACE,yBAA0B,AAC1B,kBAAmB,AACnB,OAAQ,AACR,UAAY,CACb",file:"Main.vue",sourcesContent:["\n.data-list {\n  position: relative;\n  z-index: 999;\n}\n.data-list-item {\n  padding: 16px;\n  border-top: 1px solid #262a35;\n  cursor: pointer;\n}\n.data-list-item:hover {\n  background-color: rgba(255,255,255,0.1);\n}\n.data-list-items {\n  background-color: #1d212a;\n  position: absolute;\n  left: 0;\n  width: 100%;\n}\n"],sourceRoot:""}])},208:function(t,s,i){s=t.exports=i(134)(),s.push([t.i,".build-note p{margin-bottom:8px}","",{version:3,sources:["D:/FrontEnd-JIMU/src/components/Build.vue"],names:[],mappings:"AACA,cACE,iBAAmB,CACpB",file:"Build.vue",sourcesContent:["\n.build-note p {\n  margin-bottom: 8px;\n}\n"],sourceRoot:""}])},212:function(t,s,i){var e=i(206);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(135)("0529a434",e,!0)},214:function(t,s,i){var e=i(208);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(135)("5a71d78f",e,!0)},218:function(t,s,i){"use strict";var e=i(15);e="default"in e?e.default:e;/^2\./.test(e.version)||e.util.warn("VueFocus 2.1.0 only supports Vue 2.x, and does not support Vue "+e.version);var a={inserted:function(t,s){s.value?t.focus():t.blur()},componentUpdated:function(t,s){s.modifiers.lazy&&Boolean(s.value)===Boolean(s.oldValue)||(s.value?t.focus():t.blur())}},n={directives:{focus:a}};s.version="2.1.0",s.focus=a,s.mixin=n},219:function(t,s,i){i(212);var e=i(7)(i(199),i(223),null,null);t.exports=e.exports},223:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"data-list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selfmodel,expression:"selfmodel"}],attrs:{type:"text",placeholder:"输入/选择版本号"},domProps:{value:t.selfmodel},on:{input:[function(s){s.target.composing||(t.selfmodel=s.target.value)},t.inpChange],blur:t.onBlur,focus:t.onFocus}}),t._v(" "),t.isfocus&&t.dataitems.length>0?i("div",{staticClass:"data-list-items"},t._l(t.dataitems,function(s){return i("div",{staticClass:"data-list-item",on:{click:function(i){t.itemSelect(s)}}},[t._v(t._s(s[t.okey]))])})):t._e()])},staticRenderFns:[]}},228:function(t,s,i){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-pad page-build"},[e("panel",{staticClass:"m-b16"},[e("div",{staticClass:"panel-title",slot:"title"},[t._v("\n      项目构建\n      "),e("small",[t._v("(代码经过构建，可生成能适合部署上线的版本，版本文件以镜像的形式存在。)")])]),t._v(" "),e("div",{staticClass:"p-16"},[e("ul",{staticClass:"clearfix build-step"},[e("li",[t._v("1.编写Dockerfile文件")]),t._v(" "),e("li",[t._v("2.输入版本号")]),t._v(" "),e("li",[t._v("3.选择代码分支")]),t._v(" "),e("li",[t._v("4.开始构建")])]),t._v(" "),e("ul",{staticClass:"build-intro clearfix",class:{open:t.isOpen}},[e("li",[e("div",{staticClass:"__txt"},[t._v("镜像：由多层文件系统联合组成，除了提供运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数。")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("镜像的构建就是定制每一层的配置、文件。我们把每一层的修改、安装、构建、操作的命令写入Dockerfile脚本文件，方便重复操作、透明化构建过程。")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("Dockerfile文件可存于代码仓库的项目文件夹根目录")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("Dockerfile语法规则参考："),e("a",{staticClass:"primary_txt",attrs:{href:"https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/",target:"_blank"}},[t._v("https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("我们的私有镜像："),e("a",{staticClass:"primary_txt",attrs:{href:"https://www.jmkbio.com/harbor/sign-in",target:"_blank"}},[t._v("https://www.jmkbio.com/harbor/sign-in")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("公有镜像参考地址："),e("a",{staticClass:"primary_txt m-r8",attrs:{href:"https://hub.docker.com",target:"_blank"}},[t._v("https://hub.docker.com")]),t._v(" "),e("a",{staticClass:"primary_txt",attrs:{href:"https://dashboard.daocloud.io/packages/explore",target:"_blank"}},[t._v("https://dashboard.daocloud.io/packages/explore")])]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",[e("div",{staticClass:"__txt"},[t._v("以上，仍然不知道Dockerfile如何写的，可以联系我们的工程师，@洪炯腾 @洪国安")]),t._v(" "),e("div",{staticClass:"__icon"})]),t._v(" "),e("li",{staticClass:"build-intro__open-btn",on:{click:t.openIntro}},[e("i",{staticClass:"icon icon-menudown"})])]),t._v(" "),e("div",{staticClass:"build-form"},[e("div",{staticClass:"build-form__select-ver clearfix m-b16"},[e("div",{staticClass:"left __ver"},[e("div",{staticClass:"title"},[t._v("版本号")])]),t._v(" "),e("div",{staticClass:"left __inp"},[e("dlist",{attrs:{items:t.verdata,okey:"version"},model:{value:t.version,callback:function(s){t.version=s},expression:"version"}})],1)]),t._v(" "),e("m-row",{staticClass:"branch m-b16"},[e("m-col",{staticClass:"xs-12"},[e("div",{staticClass:"title"},[t._v("选择分支")])]),t._v(" "),e("m-col",{staticClass:"xs-12"},[e("div",{staticClass:"title"},t._l(t.branchs,function(s,i){return e("m-radio",{key:i,attrs:{data:{label:s.branch_name}},model:{value:t.branch,callback:function(s){t.branch=s},expression:"branch"}})}))])],1),t._v(" "),t.isDoing?e("div",{staticClass:"text-center"},[e("img",{staticClass:"vam",attrs:{src:i(152)}}),t._v(" "),e("span",{staticClass:"vam"},[t._v("构建中请耐心等待...")])]):e("div",{staticClass:"save-box text-center"},[e("m-btn",{staticClass:"primary_bg grey-dark_txt",nativeOn:{click:function(s){t.startBuild(s)}}},[t._v("开始构建")])],1)],1)])]),t._v(" "),e("panel",{staticClass:"build-note",attrs:{title:"构建过程"}},[e("div",{staticClass:"p-16",staticStyle:{"overflow-y":"auto","max-height":"300px"}},t._l(t.notes,function(s){return e("p",[t._v(t._s(s))])}))])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.9b6ffbd3d4e48dd2f2ae.js.map