webpackJsonp([2],{249:function(t,e,s){s(275);var i=s(0)(s(291),s(266),"data-v-04a00d58",null);t.exports=i.exports},255:function(t,e,s){t.exports=s.p+"static/img/cluster-avatar.d556315.png"},258:function(t,e,s){e=t.exports=s(243)(),e.push([t.i,".v-clusterdetail .detail-title[data-v-04a00d58]{margin-bottom:8px}","",{version:3,sources:["D:/workspace/FrontEnd-JIMU/src/components/ClusterDetail.vue"],names:[],mappings:"AACA,gDACE,iBAAmB,CACpB",file:"ClusterDetail.vue",sourcesContent:["\n.v-clusterdetail .detail-title[data-v-04a00d58] {\n  margin-bottom: 8px;\n}\n"],sourceRoot:""}])},266:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-clusterdetail"},[s("div",{staticClass:"crumbs"},[s("span",{staticClass:"crumbs-item"},[t._v("服务器")]),t._v(" "),s("router-link",{staticClass:"crumbs-item",attrs:{to:{name:"Cluster"}}},[t._v("集群")]),t._v(" "),s("span",{staticClass:"crumbs-item qingse-text"},[t._v(t._s(t.cluster.name)+"详情")])],1),t._v(" "),s("div",{staticClass:"panel info-panel"},[s("div",{staticClass:"btns-group alter-button"},[t.editor?t._e():s("m-btn",{staticClass:"comb-btn waves-effect lvse",nativeOn:{click:function(e){t.editorHandle(e)}}},[t._v("修改")]),t._v(" "),t.editor?s("m-btn",{staticClass:"comb-btn waves-effect lvse",nativeOn:{click:function(e){t.submitAlter(e)}}},[t._v("确认")]):t._e(),t._v(" "),t.editor?s("m-btn",{staticClass:"comb-btn waves-effect lvse",nativeOn:{click:function(e){t.cancelAlter(e)}}},[t._v("取消")]):t._e()],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"info-right article"},[s("h5",{staticClass:"qingse-text el-editor detail-title",attrs:{contenteditable:t.editor},on:{input:function(e){t.inpChange(e,"title")}}},[t._v(t._s(t.title))]),t._v(" "),s("p",{staticClass:"time"},[t._v("更新时间："+t._s(t.cluster.update_time))]),t._v(" "),s("p",{staticClass:"el-editor",attrs:{contenteditable:t.editor},on:{input:function(e){t.inpChange(e,"description")}}},[t._v(t._s(t.description))])])]),t._v(" "),s("div",{staticClass:"panel"},[s("div",{staticClass:"btns-group"},[s("m-btn",{staticClass:"comb-btn waves-effect lvse",attrs:{href:{name:"AddHost",params:{id:t.clusterid}}}},[t._v("添加主机")]),t._v(" "),s("m-btn",{staticClass:"comb-btn waves-effect qingse",nativeOn:{click:function(e){t.moveMachine(-1)}}},[t._v("迁移主机")]),t._v(" "),s("m-btn",{staticClass:"comb-btn waves-effect hongse",nativeOn:{click:function(e){t.delMachine(-1)}}},[t._v("删除主机")]),t._v(" "),s("search",{staticClass:"right"})],1),t._v(" "),s("table",{staticClass:"striped highlight"},[s("col",{attrs:{width:"60px"}}),t._v(" "),s("thead",[s("tr",[s("th",[s("m-checkbox",{staticClass:"text-center",attrs:{data:{label:"全选"},"hide-label":""},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})],1),t._v(" "),s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("IP")]),t._v(" "),s("th",[t._v("状态")]),t._v(" "),s("th",[t._v("地址")]),t._v(" "),s("th",[t._v("操作")])])]),t._v(" "),s("tbody",t._l(t.hosts,function(e){return s("tr",[s("td",[s("m-checkbox",{staticClass:"text-center",attrs:{data:{label:e.id+""},"hide-label":""},model:{value:t.hostids,callback:function(e){t.hostids=e},expression:"hostids"}})],1),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.public_ip))]),t._v(" "),s("td",[t._v(t._s(t._f("mstatus")(e.machine_status)))]),t._v(" "),s("td",[t._v(t._s(e.address))]),t._v(" "),s("td",[s("m-btn",{staticClass:"lvse-text",attrs:{href:{name:"MachineDetail",params:{id:e.id}}}},[t._v("详情")]),t._v(" "),s("m-btn",{staticClass:"hongse-text",nativeOn:{click:function(s){t.delMachine(e.id)}}},[t._v("删除")]),t._v(" "),s("m-btn",{staticClass:"qingse-text",nativeOn:{click:function(s){t.moveMachine(e.id)}}},[t._v("迁移")])],1)])}))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info-left"},[i("div",{staticClass:"info-icon"},[i("img",{staticClass:"vam",attrs:{src:s(255),alt:""}})])])}]}},275:function(t,e,s){var i=s(258);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(244)("025e92b1",i,!0)},284:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={Pending:["准备中","lvse-text","run"],Stopped:["已停止","hongse-text","stop"],Starting:["启动中","lvse-text","run"],Running:["运行中","lvse-text","run"],Stopping:["停止中","hongse-text","stop"],Deleted:["已释放","hongse-text","stop"]};e.default={data:function(){return{clusters_to_move:[],select_move:{},cluster:{},hosts:[],editor:!1,title:"",description:"",tempEditor:{title:"",description:""},hostids:[],selectAll:!1,clusterid:-1}},filters:{mstatus:function(t){return i[t][0]}},watch:{selectAll:function(t,e){var s=this;t?this.hosts.forEach(function(t,e){var i=t.id+"";-1===s.hostids.indexOf(i)&&s.hostids.push(i)}):this.hostids=[]}},methods:{getNameById:function(t){return this.hosts.map(function(e,s){if(-1!==t.indexOf(e.id+""))return e.name})},delMachine:function(t){var e=this,s=this.$createElement,i=this.hostids;-1!==t&&(i=[t+""]),0===i.length?this.$toast("请选择要删除的主机","cc"):this.$message({theme:"comb-msg comb-msg-del mini",hasClose:!1,content:s("m-icon",{attrs:{icon:"icon-zhuyi-yin"}},"您确定删除主机"+this.getNameById(i).join(",")+"吗？"),buttons:[{label:"确定",theme:"comb-btn lvse hover"},{label:"取消",theme:"comb-btn qingse hover"}],callback:function(t){0===(arguments.length<=1?void 0:arguments[1])&&e.$Global.async("server_deletion").getData({id:i}).then(function(t){0===t.status&&e.getApiData(),e.$toast(t.msg)}),t.actionPopper(!1)}})},moveMachine:function(t){var e=this,s=this.$createElement,i=this.hostids;-1!==t&&(i=[t+""]),0===i.length?this.$toast("请选择要迁移的主机","cc"):this.$message({title:"主机迁移",theme:"comb-msg mini",hasClose:!1,content:s("m-select",{props:{listClass:"hover",datas:this.clusters_to_move},on:{input:function(t){e.select_move=t,console.log(t)}}}),buttons:[{label:"确定",theme:"comb-btn lvse hover"},{label:"取消",theme:"comb-btn qingse hover"}],callback:function(t){0===(arguments.length<=1?void 0:arguments[1])&&e.select_move.id!==e.$route.params.id&&e.$Global.async("server_migration",!0).getData({cluster_id:e.select_move.value,id:i}).then(function(t){if(0===t.status)for(var s=0;s<e.hosts.length;s++)if(-1!==i.indexOf(e.hosts[s].id+"")){e.hosts.splice(s,1);break}e.$toast(t.message,"cc")}),t.actionPopper(!1)}})},inpChange:function(t,e){this.tempEditor[e]=t.target.innerHTML},editorHandle:function(){this.editor=!0,this.tempEditor.title=this.title,this.tempEditor.description=this.description},submitAlter:function(){var t=this;this.editor=!1,this.tempEditor.title===this.title&&this.tempEditor.description===this.description||this.$Global.async("cluster_update").getData({id:this.$route.params.id,name:this.tempEditor.title,description:this.tempEditor.description}).then(function(e){t.cluster.name=t.tempEditor.title,t.cluster.description=t.tempEditor.description,t.$toast(e.message)})},cancelAlter:function(){this.editor=!1,this.title=this.cluster.name+" ",this.description=this.cluster.description+" "},getApiData:function(){var t=this,e=this.clusterid=this.$route.params.id;this.$Global.async("cluster_detail",!0).getData(null,e).then(function(s){t.hosts=s.data.server_list,t.clusters_to_move=[],t.$Global.async("clusters").getData().then(function(s){for(var i in s.data){var n=s.data[i],a={label:n.name,value:n.id};parseInt(n.id)===parseInt(e)&&(t.cluster=n,a.active=!0,t.title=n.name,t.description=n.description),t.clusters_to_move.push(a)}})})}},mounted:function(){this.getApiData()}}},291:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(284),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"ClusterDetail",mixins:[n.default]}}});
//# sourceMappingURL=2.32e2d532a7a1ab065601.js.map