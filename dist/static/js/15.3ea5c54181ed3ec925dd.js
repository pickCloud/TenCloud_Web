webpackJsonp([15],{282:function(t,e,s){var a=s(0)(s(470),s(648),null,null);t.exports=a.exports},293:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(99),i=function(t){return t&&t.__esModule?t:{default:t}}(a),l={theme:"comb-msg",hasClose:!1,buttons:[{label:"确定",theme:""},{label:"取消",theme:""}]};e.default={methods:{popperDelete:function(t,e){var s=this.$createElement;this.$confirm((0,i.default)({},l,{content:s("div",[s("img",{attrs:{src:"./static/img/error_icon.png",class:"vam m-r16"}}),s("span",{attrs:{class:"vam"}},t)])}),function(t){0===(arguments.length<=1?void 0:arguments[1])&&e&&e.call(),t.actionPopper(!1)})},popperInfo:function(t,e,s){this.$confirm((0,i.default)({},l,{content:t}),function(t){0===(arguments.length<=1?void 0:arguments[1])?e&&e.call():s&&s.call(),t.actionPopper(!1)})},popperWaiting:function(t){var e=this.$createElement;return this.$confirm({theme:"comb-msg",hasClose:!1,maskClose:!1,content:e("span",null,[e("img",{attrs:{src:"./static/img/spin.gif",class:"vam m-r8"}}),e("span",{attrs:{class:"vam"}},t)]),buttons:[]})}}}},295:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{selects:[],isSelectAll:!1}},watch:{isSelectAll:function(t,e){var s=this;t?this.listts.forEach(function(t,e){var a=t.id+"";-1===s.selects.indexOf(a)&&s.selects.push(a)}):this.selects=[]}},methods:{getAttrById:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",s=-1,a=[];++s<this.listts.length;){var i=this.listts[s];-1===t.indexOf(i.id+"")&&-1===t.indexOf(i.id)||a.push(i[e])}return a}}}},417:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{isShow:function(t){return!this.$store.state.user.currentUser.cid||this.$store.state.user.currentUser.is_admin||-1!==this.$store.state.user.currentPermission.indexOf(this.$store.state.user.permissions[t])}}}},447:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(52),l=a(i),n=s(295),r=a(n),c=s(293),o=a(c),d=s(31),u=s(417),_=a(u);e.default={mixins:[o.default,r.default,_.default],data:function(){return{modelCn:["普通项目","基础服务","应用组件"],STATUS:{0:["初创建","primary_bg alpha-black_txt"],1:["构建中","primary_bg alpha-black_txt"],2:["构建成功","primary_bg alpha-black_txt"],3:["部署中","primary_bg alpha-black_txt"],4:["部署成功","primary_bg alpha-black_txt"],"-2":["构建失败","pink_bg alpha-black_txt"],"-4":["部署失败","pink_bg alpha-black_txt"]}}},computed:(0,l.default)({},(0,d.mapGetters)("projects",["listts"]),(0,d.mapState)("user",["currentUser"])),methods:(0,l.default)({},(0,d.mapMutations)("projects",["setListts","deleteItem"]),(0,d.mapActions)("projects",["getProjectDetail","getProjects"]),{delProject:function(t){var e=this,s=this.selects;-1!==t&&(s=[t+""]),0===s.length?this.$toast("请选择要删除的项目","cc"):this.popperDelete("您确定要删除项目"+this.getAttrById(s).join(",")+"吗？",function(t){e.getProjectDetail(s).then(function(t){0===t.status&&e.getProjects(),e.$toast(t.message,"cc")})})},clearLocal:function(){window.localStorage.setItem("isHaveLocal","false"),window.localStorage.setItem("formdata","")},getApiData:function(){this.getProjects()}}),created:function(){this.getProjects(),this.$store.commit("sitepath/SET_PATH",[{name:"Main",cn:"主页"},{cn:"项目列表"}])}}},470:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(447),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={mixins:[i.default]}},648:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-pad page-machines"},[s("panel",[s("div",{staticClass:"panel-title",attrs:{slot:"title"},slot:"title"},[t.isShow("add_project")?s("m-btn",{staticClass:"primary_bg no-radius grey-dark_txt",attrs:{href:{name:"ProjectAdd"}},nativeOn:{click:function(e){t.clearLocal(e)}}},[t._v("添加项目")]):t._e(),t._v(" "),s("m-btn",{staticClass:"pink_bg no-radius grey-dark_txt",nativeOn:{click:function(e){t.delProject(-1)}}},[t._v("删除")])],1),t._v(" "),s("div",{staticClass:"panel-body p-b16"},[s("m-table",{staticClass:"hover striped machines-table"},[s("col",{attrs:{width:"55px"}}),t._v(" "),s("col",{attrs:{width:"10%"}}),t._v(" "),s("col",{attrs:{width:"10%"}}),t._v(" "),s("col",{attrs:{width:"15%"}}),t._v(" "),s("col",{attrs:{width:"30%"}}),t._v(" "),s("col",{attrs:{width:"15%"}}),t._v(" "),s("thead",[s("tr",[s("th",[s("m-checkbox",{staticClass:"list-check",attrs:{data:{label:"全选"},hideLabel:""},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}})],1),t._v(" "),s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("类别")]),t._v(" "),s("th",[t._v("状态")]),t._v(" "),s("th",[t._v("仓库地址")]),t._v(" "),s("th",[t._v("更新时间")]),t._v(" "),s("td",[t._v("操作")])])]),t._v(" "),s("tbody",t._l(t.listts,function(e){return s("tr",[s("td",[s("m-checkbox",{staticClass:"list-check",attrs:{data:{label:e.id+""},"hide-label":""},model:{value:t.selects,callback:function(e){t.selects=e},expression:"selects"}})],1),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(t.modelCn[e.mode]))]),t._v(" "),s("td",[t._v(t._s(t.STATUS[e.status][0]))]),t._v(" "),s("td",[s("m-btn",{staticClass:"primary_txt",attrs:{href:e.http_url,sizeh:-1,target:"_blank"}},[t._v(t._s(e.repos_url))])],1),t._v(" "),s("td",[t._v(t._s(e.update_time))]),t._v(" "),s("td",[s("m-btn",{staticClass:"primary_txt",attrs:{href:{name:"ProjectDetail",params:{id:e.id}}}},[t._v("详情")]),t._v(" "),s("m-btn",{staticClass:"pink_txt",nativeOn:{click:function(s){t.delProject(e.id)}}},[t._v("删除")])],1)])}))])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=15.3ea5c54181ed3ec925dd.js.map